/**
 * Author:  Oleg
 * Created: 21.06.2017
 */
SET ANSI_NULLS ON
GO

SET QUOTED_IDENTIFIER ON
GO

SET ANSI_PADDING ON
GO

DROP TABLE IF EXISTS [dbo].[Vote_Object_Rate];
DROP TABLE IF EXISTS [dbo].[Vote_Object];
DROP TABLE IF EXISTS [dbo].[Vote_User_Config];

CREATE TABLE [dbo].[Vote_Object](
	[Id] [int] IDENTITY(1,1) NOT NULL,
	[Name] [nvarchar](250) NOT NULL,
	[Media_Data] [nvarchar](max) NULL,
	[Code] [nvarchar](8) NOT NULL,
	[Qr_Code_Data] [nvarchar](max) NULL,
	[Status_Id] [int] NOT NULL DEFAULT 0,
        [Owner_User] [varchar](250) NULL,
	[DateTime_Created] [datetime] NOT NULL CONSTRAINT [DF_Vote_Object_DateTime_Created] DEFAULT (getdate()),
        CONSTRAINT [PK_Vote_Object] PRIMARY KEY CLUSTERED ([Id] ASC)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY]

GO

CREATE TABLE [dbo].[Vote_Object_Rate](
	[Id] [int] IDENTITY(1,1) NOT NULL,
	[Object_Id] [int] NOT NULL,
	[Rate] [int] NOT NULL,
	[Message] [nvarchar](max) NULL,
	[Media_Data] [nvarchar](max) NULL,
	[Notify_Manager] [int] NOT NULL DEFAULT 0,
        [User_Info] [nvarchar](1023) NULL,
	[User_Id] [nvarchar](63) NULL,
	[DateTime_Created] [datetime] NOT NULL CONSTRAINT [DF_Vote_Object_Rate_DateTime_Created]  DEFAULT (getdate()),
        CONSTRAINT [PK_Vote_Object_Rate] PRIMARY KEY CLUSTERED ([Id] ASC)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY],
        CONSTRAINT [FK_Vote_Object_Id] FOREIGN KEY([Object_Id]) REFERENCES [dbo].[Vote_Object] ([Id])
) ON [PRIMARY]

GO

INSERT [dbo].[Vote_Object] ([Name], [Code], [Media_Data], [Entity_Key], [Catalog_Key], [Status_Id])
 VALUES (N'Bar "All Night"', N'****', 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPoAAAD6CAYAAACI7Fo9AAAPpUlEQVR4nO3df6jd9X3H8WePd5fL5S6EICGELATJQghBRERCCFnIbKo1DSKZ67rSuU2GZF3pulVKN2RlDJExSrd1ZUgZ4qSUVUpxWWq1plt0XRs7jT/mVDJtnLNp1CTG/LgmN3d/vO8hMcbcz/d8v+d8vud8ng/4QCk3ns855/s63+/38/l8P2+QJEmSJEmSJEmSJEldl+XugDQgW4FFwM+As5n7IqkPFgEvA8eAe4DVebsjqR/+HJgBZufaa3P/39KcnZLUnJXAIc6FvNtmgOeB24GF2XonqRH/wPtDfn47DfwQ2Jirg5LqWU/cl18q6LPAcWBbpj5KqmEM2Mn8IZ8FHgTG83RTUh03ASeZP+RHiTO/pCEzBfyItLP5PUAnTzcl1bGDGGSbL+QHgSsy9VFSDUuAl5g/5DPAnZn6KKmmCxfHfFDbT6yYkzRkVgOvM3/ITwO3ZeqjpBo6zL84ptv2EtNvkobMRmKqLOVsviVTHyXVMEG1xTGShtB20hbHnATWZuqjpBoWkb445muZ+iippk+TNp32Jj5/Lg2l5cALpJ3Nv5Cpj5Jq6AB/QVrIX8LNJaShtJa0xTEzwCcz9VFSDePA10k7m+8BJvN0U1IdG0nbOWYauC5THyXVMEn64ph/wp1jpKF0M2nPmh8FrsrUR0k1LCQeSEk5m38ZH1yRhtIO0hbHvAqsyNNFSXUsJcoqpZzN78B94KSh0wHuIi3k+4DFebopqY5VwGHSFsd8IlMfW+1DGV5zAfAnwLIMr63htBq4OuHv3gEeAU70tzs9+T9iye6RHC+eI+gQO3x8E9cfqwxHgN8AvpurA5dlet39xDrljwC/kKkP0iCcIB6lfSBnJ3IFHeAZYonipsz9kPrlXeBLwFdzdyRnwGaBJ4jL92vJdxsh9cNZ4O+AP5v731nlPpPOEE8XrQTWYNg1Gs4C3wL+gLhqzS530CHWLe8GrsE6WBoNu4HfAt7O3ZGuNp1BlwPfwQcRNNyeBT4GvJK5H+/RpmWCB4hfwf/J3RGpRweA36RlIYd2ndG7NgPfIH0Z47vAPxL7gmm4dYDfJ2231ifo75TVLxNbUKU+z/4G8OvAo33r0Qi6hbTyOt32r7iV7yjYRFohhmP0t6zSUuD7Cf04vz8f72N/RtpniBHLlA96hthNxJV2w2uCGMRK+b7vp3/Pmi8kVm2mhvw08Nk+9aUIY8QTSynPH3fD/jXcCHBYfYK0H/ZD9G/AdhL4G9KPuVngbto11jWUJkgvhTtLHCh34j5hw2YRsVIy5cf8y/QnWOPAn5J+FTkL3Ecco2rAAmAX6R/+ceB2/JUdJneQtg/cT4lp2KZ1gNuIYyf1ONuFt4qNWwz8hPQv4TBwU5aeqqoVRIBT7oU/16c+bCPtefdu24uDv32zinjqLfXLeA3YkKWnquIrpN0T76M/Z9D1xLGSely9RDwfrz5aRwzGpH4pzxNr6NVOV5P2fU7Tn+mr1cQxkno8HSR+GDQAW0mr0tFtP8LLrH6bIK64NhG3TB8n1kJsI66qruD9A6RjpE9j7b7Iv69rCel11WeJdR3bcOxnYLoDJ1VGR3cSg3pqRge4kpg/fpDYXvkwMZh1mrgUP018R8eJ2uT7ibUOO4inFa8n7Qf7JFGCqUlTVBvgnSaOOUM+YGPEVEiVOfZ7cSqkrklivnsPEdIq883nfxdHifCn/P03aDZgY8SxUKW/d2IxiGwmiJ07qnxhd+Gvci/GgU8R97Mp02BNtWPE2b9JVRZhzeIirFZYAHybamHfgWGvYi3wMIMNeLf9ZcPv5feoFvLv4C1faywGHif9y5smBlV0aR3gd6g2v9xkO0iz02nbqPZj9TgWgmidK6g2TXKMmKrTxU0Cf0Wes3i3fabB97OOak9DPo+7HbXWNcTob+qX+ToxJaT3mgLuIV/Au+2rNDMAtppqx8WrxLGkFvso6aO5s8BzOMd+vgni6a3cIe+2u6kX9mXEirrU13uTOIY0BG6l2oKa3fhwAkSg7qC3KbNZYr78ILFEdO9ce4lY+VblYZHz2wzxgFIvFlF984hbe3wtZdABvkC1BTXfxCmULVT7gZwlFrM8CXyRWAG36IL/ZocY0NpIzEXvI20HmfPbUaovO50k5t9Tf7SmiWNmZGdj2rhnXBPGiamZHaRd+p0F/pZ41rlEU0Qw1ib+/Rliz7a7iXpipxL/3SRxafx5Yp176mX5fxL7sZ1J/Ps/JP27P0MUWvg8sf/gSBrVoMO5QaVbSPulPkuL9uEesA7p88VvEwH/a6J6aS8WAn9EjKxXed3UiicLSP/OvwX8Lr2/F7XAYqrdp9nmb88RQd9OvYHMDvHwy8GM7+X7wOU13oNaZAVxH5k7IKPYXiCWxtYZGb+ZajMlTbV9xLGhEXIl1TatsKW3aerv/FJlx98m2k+JY0IjaDN5LxNHuR2n3iKTCWJd+SD6+ibx3LxG2C1Un0KypbX7K3wPF3MV1Zap9tJOEseARlyHuEzMuYZ7VNsh6s9D39/H/s3Q7Pp5tVy3METuYIxam+b9C2aqup7+3avfhZtHFGeCaruM2OZvJ6m/r9sk8bBR0327F1c+FmuK2FAhd0BGpf2w2sf/gXY23K+H8FmG0V3bm+Adopb1U7k70mKpK9EA/r6h1/yvhv47EEtnfxs40uB/U0NqFfAy+c+IbWz3kbaY5WGa2475cw31fT8WWtAF1pFndVbb2yeJfdovdd+8i2aXke5ooN+HcAchfYCt9P7c9Ki22+Y+m+XE+vbniHUIB4mA30LzhRX+uGafj+GegLqEDrHxgHPs59qXLvIZdVu/fKVGf6eJnV5LHntSgjFiE4Ved1kZtfZAvY+zJ70+bWihBVUyQWzab9hjN9RBbnm8gN7GSmaIUX8r8aiSqoUhRrVNE1tMDcp2qt86zWChBdWwhKgxljtsudv9DOZyuEO1wofdtof4rqSerQKeIX/YcrbDDGaqajPVZz2ewb351ZB1uKBmF/29NF5AtbJas8TmEc6Vq1FbiUUYuQOXq80QZar7cQk/RuzYW2Xw8xDxnUiN6s6xl7xpxXFiAU2TYR8DPk21vd6PEcUfpb7oVjIZ5N5mbWvHiM0bmpjGmiQ+zyr35d1CC86Vq68miCIPJa+emwa+Tr1qo6uIB2aq/GieJlbNOVeugehWNSl9Qc1+Yl36isTPrQOsJO71X674WjNE2aypxNfSBUa5Uks/XU4ceJtzd6QFDgCPERs8vAj8nHMlmiaJlXVrgA8TNdSWUn0t+g+AXwPeqN/dMhn03q0gVs9dlbkfbfIOUTqpW8NsnJg6q3Mmfha4kfhBkbJYi3Ps/WyvYqEFtcQm3LSiH+0oUW5Zao3tVK/7bfvgNj33mUqt0iG2QCp9JL6JNkMsonHzCLVSBwtDNNEstKDWGyMWguQOy7C2+3BBjIbEJL1vh1Ryexg3j9CQuRx4kvzhGZb2JG4eoSG1EufYU9rLWGhBQ+5aYg/03GFqaztILIuVht5WYvFH7lC1rR0Fbq7xuUqt0iE2bHBBzbl2Ergd58o1YsaI4gIlP8febaeJCjBNl3KSWmESC0N0Cy1M1vwspVZbSJQ5KjHsM8RjvQtrf4rSEFgK7CZ/8Abd9sy9d6kYq4F95A/foNozOFeuQpVSGMJCCyreRxntwhAWWpCIeeRPMZqFIY4ThRacK5cYzcIQp4Ev4nPl0nuMMzqFIWaIQgsuiJEuYlQKQzyAC2KkS1rEcG9asWfuPUiaxzJi3jl3aKu25+f6LinRGuA18oc3tR3EBTFST9YzHNNux4ANffoMpCLcRLtH4k/j5hFSI9paGMJCC1KDOsDdtCvsM3N9ckGM1KA2FYaYwUILUt9MAbvIH/SHcPMIqa+WAHvJF/K9OFcuDcQa4AUGH/IXgLUDeH+S5qxnsAtqXgc2DeKNSXqvbcBh+h/yw8D2Ab0nSRfoFoY4Tv9CfpyYx3euXMponCgM0Y9NK6ax0ILUGv0oDGGhBamFFhEbPjQV9G/jc+VSKzVVGGIPzpVLrVa3MISFFqQhcS1RNKFqyF/FQgvSULkeeJP0kB/GQgvS0OkWhkiZYz8J3Ipz5dJQ6gD3Mn/Q78OQjzy/4NF1Fngr4e+OzP2tRphBlwpg0KUCGHSpAAZdKoBBlwpg0KUCGHSpAAZdKoBBlwpg0KUCGHSpAAZdKoBBlwpg0KUCGHSpAAZdKoBBlwpg0KUCGHSpAAZdKoBBlwpg0KUCGHSpAAZdKoBBlwpg0KUCGHSpAAZdKoBBlwpg0KUCGHSpAAZdKoBBlwpg0KUCGHSpAAZdKoBBlwpg0KUCGHSpAAZdKoBBlwpg0KUCGHSpAAZdKoBBlwpg0KUCGHSpAAZdKoBBlwpg0KUCGHSpAAZdKoBBlwpg0KUCGHSpAAZdKoBBlwpg0KUCGHSpAAZdKoBBlwpg0KUCGHSpAAZdKoBBlwpg0KUCGHSpAAZdKoBBlwpg0KUCGHSpAAZdKoBBlwpg0EfbWEN/oyF3We4OqFEd4JeAXwE+C9wE/OI8/2YZcCUwDkwDbwNn+9hHZfCh3B1QbRPASmAdcCNwFRHeqmfqs8DPgKeAh4DHgP8GTjTWU2Vj0IfTQuIsvAn4MLAauLzh1zgCvAj8gAj+08AbDb+GBsSgD49lwLXADcAGYDkwOaDXPgUcAP4D2AX8GHgFL/GHhkFvrzHiTL0B+BhxBl9C/sGzM8SZ/WlgJ3GJ/yzwbs5O6dIMertMAVcDvwpcT9x7L8rao/kdIc7u3yMu8Z8gBvTUIgY9v8XEWfsGYDNx1h7UJXnTThEDev9GXOI/Bvxv1h4JMOg5dIgz9XXEKPk1xFk79yV5084QZ/uniNA/Slzue1+fgUEfjHEi0DcQl+SribN2KQuWzhJn+1eA7xLB/3ecuhsYg94/C4hL8RuBLcQl+XjWHrVHd0DvUWJA7xHg51l7NOIMerOWAVuJUfKNlHXW7lX3bP9j4EHgn4n5ezXIoPeuQ9xXX00EeysxBab6XiQC/yBxiX8G7+1rMejVjBGX5JuIcG8BlubsUAHeIO7rdxKX+m8RwVcFBn1+E8Ql+RbifnsDEXYN3gniDL8L+Bditd4pPNvPy6C/X4cI8hoi2NcRD4o4kNYuZ4gVeY8QZ/uniYU6nu0vwqCHceKhkO4TYBuJuW4NjwOcewDnMWIU/1TODrVJyUGfIi7JrwM+QoS86SfAlMfbxCj+w8T9/QFi8Y4Ksw54HDgJzNpGuk0DPwHWU7BS53iXE1/8RO6OqO/GiSnQFZn7kVWpQZeKYtClAhh0qQAGXSrAqD0DneoIsROKyvFW7g7kVOo8+jjDu4uLenMC97WTJEmSJEmSJEmSNL//BzKLRGZZ250HAAAAAElFTkSuQmCC',N'1', N'2', 1)

GO

CREATE TABLE [dbo].[Vote_User_Config](
	[Owner_User] [varchar](250) NOT NULL,
	[Manager_Email] [varchar](max) NULL,
	[Entity_Key] [char](50) NULL,
	[Catalog_Key] [char](50) NULL,
	[Inform_If_Below] [smallint] NULL DEFAULT 3,
	[Inform_If_Above] [smallint] NULL DEFAULT 7,
	[Next_Vote_Period] [smallint] NULL,
        CONSTRAINT [PK_Owner_User] PRIMARY KEY ([Owner_User])
) ON [PRIMARY]

GO